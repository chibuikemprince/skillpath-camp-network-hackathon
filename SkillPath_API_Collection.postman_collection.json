{
  "info": {
    "name": "SkillPath API Collection",
    "description": "Complete API collection for SkillPath - AI-powered learning companion with blockchain certificates",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000/api",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "curriculum_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "lesson_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "quiz_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/../health",
          "host": ["{{base_url}}"],
          "path": ["..", "health"]
        },
        "description": "Check if the API server is running and healthy"
      },
      "response": []
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('jwt_token', response.token);",
                  "    pm.collectionVariables.set('user_id', response.user.id);",
                  "    pm.test('Registration successful', function () {",
                  "        pm.expect(response.token).to.be.a('string');",
                  "        pm.expect(response.user.email).to.be.a('string');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\",\n  \"profile\": {\n    \"targetSkill\": \"React Development\",\n    \"currentLevel\": \"beginner\",\n    \"timePerWeek\": 10,\n    \"goalType\": \"job-ready\",\n    \"preferredStyle\": \"mixed\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/register",
              "host": ["{{base_url}}"],
              "path": ["auth", "register"]
            },
            "description": "Register a new user with learning profile"
          }
        },
        {
          "name": "Login User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('jwt_token', response.token);",
                  "    pm.collectionVariables.set('user_id', response.user.id);",
                  "    pm.test('Login successful', function () {",
                  "        pm.expect(response.token).to.be.a('string');",
                  "        pm.expect(response.user.email).to.be.a('string');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            },
            "description": "Login with email and password to get JWT token"
          }
        }
      ]
    },
    {
      "name": "Curriculum Management",
      "item": [
        {
          "name": "Generate Curriculum",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('curriculum_id', response.curriculum._id);",
                  "    pm.test('Curriculum generated', function () {",
                  "        pm.expect(response.curriculum.modules).to.be.an('array');",
                  "        pm.expect(response.curriculum.weeklyRoadmap).to.be.an('array');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/curriculum",
              "host": ["{{base_url}}"],
              "path": ["curriculum"]
            },
            "description": "Generate AI-powered curriculum based on user profile"
          }
        },
        {
          "name": "Get User Curriculum",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/curriculum",
              "host": ["{{base_url}}"],
              "path": ["curriculum"]
            },
            "description": "Get the user's current curriculum"
          }
        },
        {
          "name": "Get Weekly Plan",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/curriculum/week/1",
              "host": ["{{base_url}}"],
              "path": ["curriculum", "week", "1"]
            },
            "description": "Get detailed plan for a specific week"
          }
        },
        {
          "name": "Get Progress Dashboard",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/curriculum/dashboard",
              "host": ["{{base_url}}"],
              "path": ["curriculum", "dashboard"]
            },
            "description": "Get user's learning progress and statistics"
          }
        },
        {
          "name": "Complete Week",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/curriculum/week/1/complete",
              "host": ["{{base_url}}"],
              "path": ["curriculum", "week", "1", "complete"]
            },
            "description": "Mark a week as completed (requires all lessons passed)"
          }
        },
        {
          "name": "Get Week Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/curriculum/week/1/status",
              "host": ["{{base_url}}"],
              "path": ["curriculum", "week", "1", "status"]
            },
            "description": "Check if a specific week is completed"
          }
        }
      ]
    },
    {
      "name": "Lessons & Quizzes",
      "item": [
        {
          "name": "Generate Lesson for Subtopic",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('lesson_id', response.lesson._id);",
                  "    pm.test('Lesson generated', function () {",
                  "        pm.expect(response.lesson.title).to.be.a('string');",
                  "        pm.expect(response.lesson.content).to.be.a('string');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"subtopic\": {\n    \"title\": \"Introduction to React Components\",\n    \"description\": \"Learn the basics of React functional components\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/lessons/subtopic/subtopic-1/{{curriculum_id}}",
              "host": ["{{base_url}}"],
              "path": ["lessons", "subtopic", "subtopic-1", "{{curriculum_id}}"]
            },
            "description": "Generate AI lesson content for a specific subtopic"
          }
        },
        {
          "name": "Get Lesson Content",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/lessons/{{lesson_id}}",
              "host": ["{{base_url}}"],
              "path": ["lessons", "{{lesson_id}}"]
            },
            "description": "Get lesson content by lesson ID"
          }
        },
        {
          "name": "Get Lesson Quiz",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('quiz_id', response.quiz._id);",
                  "    pm.test('Quiz loaded', function () {",
                  "        pm.expect(response.quiz.questions).to.be.an('array');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/lessons/{{lesson_id}}/quiz",
              "host": ["{{base_url}}"],
              "path": ["lessons", "{{lesson_id}}", "quiz"]
            },
            "description": "Get quiz questions for a lesson"
          }
        },
        {
          "name": "Submit Quiz Answers",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"answers\": [0, 1, 2, 0, 1]\n}"
            },
            "url": {
              "raw": "{{base_url}}/lessons/quiz/{{quiz_id}}/submit",
              "host": ["{{base_url}}"],
              "path": ["lessons", "quiz", "{{quiz_id}}", "submit"]
            },
            "description": "Submit quiz answers and get score with explanations"
          }
        }
      ]
    },
    {
      "name": "Resources & Projects",
      "item": [
        {
          "name": "Get Topic Resources",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/resources/topics/topic-1/{{curriculum_id}}",
              "host": ["{{base_url}}"],
              "path": ["resources", "topics", "topic-1", "{{curriculum_id}}"]
            },
            "description": "Get curated resources for a specific topic"
          }
        },
        {
          "name": "Get Module Projects",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/resources/modules/module-1/{{curriculum_id}}/projects",
              "host": ["{{base_url}}"],
              "path": ["resources", "modules", "module-1", "{{curriculum_id}}", "projects"]
            },
            "description": "Get project suggestions for a module"
          }
        },
        {
          "name": "Mark Resource Completed",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/resources/resource-id/complete",
              "host": ["{{base_url}}"],
              "path": ["resources", "resource-id", "complete"]
            },
            "description": "Mark a learning resource as completed"
          }
        },
        {
          "name": "Mark Project Completed",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/resources/projects/project-id/complete",
              "host": ["{{base_url}}"],
              "path": ["resources", "projects", "project-id", "complete"]
            },
            "description": "Mark a project as completed"
          }
        },
        {
          "name": "Get User Portfolio",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/resources/portfolio",
              "host": ["{{base_url}}"],
              "path": ["resources", "portfolio"]
            },
            "description": "Get user's completed projects and achievements"
          }
        }
      ]
    },
    {
      "name": "Blockchain Certificates",
      "item": [
        {
          "name": "Check Certificate Eligibility",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/certificates/eligibility?curriculumId={{curriculum_id}}",
              "host": ["{{base_url}}"],
              "path": ["certificates", "eligibility"],
              "query": [
                {
                  "key": "curriculumId",
                  "value": "{{curriculum_id}}"
                }
              ]
            },
            "description": "Check if user is eligible for certificate (completed all modules, passed all quizzes with 50%+)"
          }
        },
        {
          "name": "Confirm Certificate Payment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"curriculumId\": \"{{curriculum_id}}\",\n  \"walletAddress\": \"0x1234567890123456789012345678901234567890\",\n  \"paymentTxHash\": \"0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/certificates/payment-confirmed",
              "host": ["{{base_url}}"],
              "path": ["certificates", "payment-confirmed"]
            },
            "description": "Record payment transaction for certificate (0.01 ETH)"
          }
        },
        {
          "name": "Request Certificate Mint",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"curriculumId\": \"{{curriculum_id}}\",\n  \"walletAddress\": \"0x1234567890123456789012345678901234567890\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/certificates/request-mint",
              "host": ["{{base_url}}"],
              "path": ["certificates", "request-mint"]
            },
            "description": "Get certificate metadata for blockchain minting (requires payment)"
          }
        },
        {
          "name": "Record Certificate Mint",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"curriculumId\": \"{{curriculum_id}}\",\n  \"walletAddress\": \"0x1234567890123456789012345678901234567890\",\n  \"tokenId\": \"12345\",\n  \"mintTxHash\": \"0xfedcba0987654321fedcba0987654321fedcba0987654321fedcba0987654321\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/certificates/minted",
              "host": ["{{base_url}}"],
              "path": ["certificates", "minted"]
            },
            "description": "Record successful certificate minting on blockchain"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-set authorization header if token exists",
          "const token = pm.collectionVariables.get('jwt_token');",
          "if (token && !pm.request.auth) {",
          "    pm.request.headers.add({",
          "        key: 'Authorization',",
          "        value: `Bearer ${token}`",
          "    });",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test for response time",
          "pm.test('Response time is less than 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "// Global test for content type",
          "if (pm.response.code === 200 || pm.response.code === 201) {",
          "    pm.test('Content-Type is application/json', function () {",
          "        pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "    });",
          "}"
        ]
      }
    }
  ]
}